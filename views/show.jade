extends layout

block content
    // jquery
    script(type='text/javascript', src='//code.jquery.com/jquery-1.11.1.min.js')
    // bootstrap
    link(type='text/css', rel='stylesheet', href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css')
    script(type='text/javascript', src='//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js')
    // handlebars
    script(type='text/javascript', src='//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.js')
    // alpaca
    link(type='text/css', href='//code.cloudcms.com/alpaca/1.5.17/bootstrap/alpaca.min.css', rel='stylesheet')
    script(type='text/javascript', src='//code.cloudcms.com/alpaca/1.5.17/bootstrap/alpaca.min.js')


    // Large modal
    div#button 

    button.btn.btn-primary(type='button', data-toggle='modal', data-target='.bs-example-modal-lg') Large modal

    .modal.fade.bs-example-modal-lg(tabindex='-1', role='dialog', aria-labelledby='myLargeModalLabel')
      .modal-dialog.modal-lg
        .modal-content
          #form


    script(type='text/javascript').

        var WForm = function (options) {
            var loadConfig = function (cb) {
              var serverUrl = 'http://localhost:3000/configs/' + options['key'];
              $.getJSON(serverUrl, cb); 
            };

            var bind = function (selector, form) {
              $(selector).alpaca(form);
            };

            return {
              loadConfig: loadConfig,
              bind: bind
            };
        };

        $(document).ready(function() {
            var wForm = new WForm({key: '#{key}'});

            wForm.loadConfig(function (data) {
                wForm.bind('#form', data.form);
            });

        });